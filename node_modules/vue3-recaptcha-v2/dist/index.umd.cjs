(function(o,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(o=typeof globalThis<"u"?globalThis:o||self,e(o.index={},o.Vue))})(this,function(o,e){"use strict";const f="https://www.google.com/recaptcha/api.js",C="https://recaptcha.net/recaptcha/api.js",w="vue3-recaptcha-v2:options",l="vue3-recaptcha-v2",s=typeof window>"u";class t extends Error{constructor(n){super(n),this.message="[vue3-recaptcha-v2] "+n}}const b=()=>{const c=e.inject(w);return{options:c,handleGenerateScript:i=>{if(s)throw new t("Cannot generate script on server side");const a=document.getElementById(l);a&&a.remove();const r=document.createElement("script"),p=c!=null&&c.cnDomains?C:f,h=i?`&hl=${i}`:"";r.setAttribute("id",l),r.setAttribute("src",`${p}?render=explicit${h}`),r.setAttribute("async",""),r.setAttribute("defer",""),r.onerror=()=>{new t("Failed to load script")},document.head.appendChild(r)}}},g=()=>({handleReset:a=>{if(s)throw new t("reCaptcha is not available on server side");if(!window.grecaptcha)throw new t("reCaptcha is not available on window");window.grecaptcha.reset(a)},handleGetResponse:a=>{if(s)throw new t("reCaptcha is not available on server side");if(!window.grecaptcha)throw new t("reCaptcha is not available on window");return window.grecaptcha.getResponse(a)},handleExecute:a=>{if(s)throw new t("reCaptcha is not available on server side");if(!window.grecaptcha)throw new t("reCaptcha is not available on window");window.grecaptcha.execute(a)}}),m=e.defineComponent({__name:"Recaptcha",props:{theme:{},size:{},tabindex:{},language:{}},emits:["widgetId","loadCallback","expiredCallback","errorCallback"],setup(c,{emit:n}){const i=c,a=e.ref(null),r=e.ref(null),{handleGenerateScript:p,options:h}=b(),R=()=>{if(!window.grecaptcha)throw new t("reCAPTCHA is not loaded");if(!r.value)throw new t("element is not defined");window.grecaptcha.ready(()=>{try{const{sitekey:d}=h,{theme:u,size:k,tabindex:A}=i;a.value=window.grecaptcha.render(r.value,{sitekey:d,theme:u,size:k,tabindex:A,callback:_=>n("loadCallback",_),"expired-callback":()=>n("expiredCallback"),"error-callback":()=>n("errorCallback")}),n("widgetId",a.value)}catch(d){throw new t(d.message)}})};return e.onBeforeMount(()=>{p(i.language)}),e.onMounted(()=>{document.getElementById(l).onload=()=>{R()}}),(d,u)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"reCAPTCHARef",ref:r},null,512))}});function v(c,n){if(!n.sitekey)throw new t("sitekey is required");c.provide(w,n)}o.RecaptchaV2=m,o.install=v,o.useRecaptcha=g,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
